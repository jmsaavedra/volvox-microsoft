"use strict";angular.module("elbulliApp",["ngAnimate","ngSanitize","ngTouch","ui.router","anim-in-out","angularMoment","pascalprecht.translate","slick","ngDialog","app.data","app.router","app.configs","app.services","app.filters"]).run(["$rootScope","$translate","$state","$stateParams","$timeout","$location","amMoment","ngDialog",function(a,b,c,d,e,f,g,h){a.title="elBulliLab Timelapse",a.allowSlide=!0,e(function(){a.lang=d.lang||"en",b.use(a.lang),g.changeLocale(a.lang)},1e3),a.changeLanguage=function(d){"en"===d?g.changeLocale("en"):"es"===d&&g.changeLocale("es"),a.lang=d,b.use(a.lang),c.go(c.current,{lang:a.lang},{reload:!0})},a.heightMinusNavs=window.innerHeight-140,window.addEventListener("resize",function(){a.heightMinusNavs=window.innerHeight-140}),a.shareLink=function(){h.open({template:'<p>Share This Link</p><input id="shareDialog" type="text" value="'+f.absUrl()+'" class="form-control">',scope:a,plain:!0}),$setTimeout(function(){$("#shareDialog").focus()},1e3)}}]).constant("angularMomentConfig",{timezone:"Europe/Madrid"});var moment=moment||{};angular.module("app.data",[]).run(["$rootScope","Server",function(a,b){a.months=[{year:2015,month:"06",imageVideo:b.getMonthlyThumb("06012015",!0,0),imageScan:b.getMonthlyThumb("06012015",!1,0),isActive:moment().unix()-moment("06012015","MMDDYYYY").unix()>=0?!0:!1},{year:2015,month:"07",imageVideo:b.getMonthlyThumb("07012015",!0,1),imageScan:b.getMonthlyThumb("07012015",!1,1),isActive:moment().unix()-moment("07012015","MMDDYYYY").unix()>=0?!0:!1},{year:2015,month:"08",imageVideo:b.getMonthlyThumb("08012015",!0,2),imageScan:b.getMonthlyThumb("08012015",!1,2),isActive:moment().unix()-moment("08012015","MMDDYYYY").unix()>=0?!0:!1},{year:2015,month:"09",imageVideo:b.getMonthlyThumb("09012015",!0,3),imageScan:b.getMonthlyThumb("09012015",!1,3),isActive:moment().unix()-moment("09012015","MMDDYYYY").unix()>=0?!0:!1},{year:2015,month:"10",imageVideo:b.getMonthlyThumb("10012015",!0,4),imageScan:b.getMonthlyThumb("10012015",!1,4),isActive:moment().unix()-moment("10012015","MMDDYYYY").unix()>=0?!0:!1},{year:2015,month:"11",imageVideo:b.getMonthlyThumb("11012015",!0,5),imageScan:b.getMonthlyThumb("11012015",!1,5),isActive:moment().unix()-moment("11012015","MMDDYYYY").unix()>=0?!0:!1},{year:2015,month:"12",imageVideo:b.getMonthlyThumb("12012015",!0,6),imageScan:b.getMonthlyThumb("12012015",!1,6),isActive:moment().unix()-moment("12012015","MMDDYYYY").unix()>=0?!0:!1},{year:2016,month:"01",imageVideo:b.getMonthlyThumb("01012016",!0,7),imageScan:b.getMonthlyThumb("01012016",!1,7),isActive:moment().unix()-moment("01012016","MMDDYYYY").unix()>=0?!0:!1},{year:2016,month:"02",imageVideo:b.getMonthlyThumb("02012016",!0,8),imageScan:b.getMonthlyThumb("02012016",!1,8),isActive:moment().unix()-moment("02012016","MMDDYYYY").unix()>=0?!0:!1},{year:2016,month:"03",imageVideo:b.getMonthlyThumb("03012016",!0,9),imageScan:b.getMonthlyThumb("03012016",!1,9),isActive:moment().unix()-moment("03012016","MMDDYYYY").unix()>=0?!0:!1},{year:2016,month:"04",imageVideo:b.getMonthlyThumb("04012016",!0,10),imageScan:b.getMonthlyThumb("04012016",!1,10),isActive:moment().unix()-moment("04012016","MMDDYYYY").unix()>=0?!0:!1},{year:2016,month:"05",imageVideo:b.getMonthlyThumb("05012016",!0,11),imageScan:b.getMonthlyThumb("05012016",!1,11),isActive:moment().unix()-moment("05012016","MMDDYYYY").unix()>=0?!0:!1},{year:2016,month:"06",imageVideo:b.getMonthlyThumb("06012016",!0,12),imageScan:b.getMonthlyThumb("06012016",!1,12),isActive:moment().unix()-moment("06012016","MMDDYYYY").unix()>=0?!0:!1},{year:2016,month:"07",imageVideo:b.getMonthlyThumb("07012016",!0,13),imageScan:b.getMonthlyThumb("07012016",!1,13),isActive:moment().unix()-moment("07012016","MMDDYYYY").unix()>=0?!0:!1}],setTimeout(function(){},1e4)}]),angular.module("app.router",[]).config(["$stateProvider","$urlRouterProvider",function(a,b){a.state("about",{url:"/{lang:en|es}",templateUrl:"views/main.html",controller:"MainCtrl"}).state("video",{url:"/{lang:en|es}/video",templateUrl:"views/video.html",controller:"VideoYearCtrl"}).state("video.month",{url:"/{year:2015|2016}/{month:[0-9]+}",templateUrl:"views/video.month.html",controller:"VideoMonthCtrl"}).state("video.day",{url:"/{year:[0-9]+}/{month:[0-9]+}/{day:[0-9]+}",templateUrl:"views/video.day.html",controller:"VideoDayCtrl"}).state("photo",{url:"/{lang:en|es}/photo",templateUrl:"views/photo.html",controller:"PhotoYearCtrl"}).state("photo.month",{url:"/{year:2015|2016}/{month:[0-9]+}",templateUrl:"views/photo.month.html",controller:"PhotoMonthCtrl"}).state("photo.day",{url:"/{year:[0-9]+}/{month:[0-9]+}/{day:[0-9]+}",templateUrl:"views/photo.day.html",controller:"PhotoDayCtrl"}),b.otherwise("/es")}]),angular.module("app.configs",[]).config(["$translateProvider","$sceDelegateProvider","$locationProvider",function(a,b,c){b.resourceUrlWhitelist(["self","https://player.vimeo.com/video/**"]),a.useSanitizeValueStrategy("sanitize"),a.translations("en",{MAIN_TITLE:"Welcome to elBulliLab Timelapse",MAIN_DESC:"Documenting information is one of the most important elements of the creative process. For that reason, it is important to archive everything that happens in elBulliLab. Our time-lapse integrates photography and innovative programming to tell the history and evolution from four different views of this fascinating project over 365 days.<br><br>Never miss a moment of this epic story. Come join us in the time-lapse!",TECH_TITLE:"The Process of Capturing elBulliab",TECH_DESC:"These daily digest videos captured from four different cameras reveal the fascinating, interesting and unnoticed perspectives that occur in elBullilab.  Every night the still photographs are automatically post-processed to create a 30 seconds motion clip of that day in  fast-forward time which can be played over and over again.<br><br>Take a look, discover our day-to-day, and meet the people who made this mapping possible.",TECH_STEP_HEAD:"Step",TECH_STEP_1_BODY:"Each camera is strategically placed to capture a still photograph in the lab every 60 seconds between the working hours of 9:00 am to 9:00 pm",TECH_STEP_2_BODY:"Each produce 720 photographs per day.",TECH_STEP_3_BODY:"Images are stored on Microsoft Azure cloud.",TECH_STEP_4_BODY:"Videos shared worldwide on the Internet.",PROJECT_INFO:"PROJECT INFORMATION",POWERED:"POWERED BY ",NAV:{ABOUT:"ABOUT",VID:"VIDEO GALLERY",SCAN:"SCAN GALLERY"},DIGEST:{MONTH:"Monthly Digest",DAY:"Daily Digest"},CAMERA:"Camera",VANTAGE:"See More Vintage Points",BACK_MONTH:"Back to Monthly Digest",BACK_DAY:"Back to Daily Digest",BACK:"Back"}),a.translations("es",{MAIN_TITLE:"Bienvenido al timelapse elBulliLab",MAIN_DESC:"Documentar la información es uno de los hechos más importantes de un proceso creativo, por ese motivo, esta tan importante archivar todo lo que sucede en elBulliLab. Timelapse integra la fotografía y la programación de última generación para contar la historia y la evolución durante 365 días desde 4 puntos de vista diferentes de este proyecto tan fascinante.<br><br>No te pierdas ni un momento de esta historia épica. ¡Ven y únete a nosotros en el Timelapse!",TECH_TITLE:"El proceso de captura elBullilab",TECH_DESC:"Estos videos timelpase revelan las perspectivas fascinantes, interesantes y tal vez, inadvertidas que se producen en elBullilab. Cada noche, las fotografias fijas son automáticamente procesadas para crear un clip video de 30 segundos de ese día en avance rápido que se puede mirar una y otra vez. Echa un vistazo, descubre nuestro día a día, y conocer a la gente que hace esta creativa cartografía posible.",TECH_STEP_HEAD:"Paso",TECH_STEP_1_BODY:"Cada cámara se coloca estratégicamente una fotografía del laboratorio cada 60 segundos dentro de los horarios de trabajo del 9h de la mañana a las 21h de las tarde.",TECH_STEP_2_BODY:"Cada cámara produce 720 fotografías por día.",TECH_STEP_3_BODY:"Las imágenes se almacenan en el Microsoft Azure Cloud.",TECH_STEP_4_BODY:"Los vídeos son compartidos con el mundo en Internet.",PROJECT_INFO:"INFORMACIÓN SOBRE EL PROYECTO",POWERED:"POWERED BY ",NAV:{ABOUT:"ACERCA DE",VID:"VIDEO GALERÍA",SCAN:"SCAN GALERÍA"},DIGEST:{MONTH:"Recopilación Mensual",DAY:"Resumen diario"},CAMERA:"Cámara",VANTAGE:"Ver Puntos Más Vintage",BACK_MONTH:"Volver a la Mensual Digesto",BACK_DAY:"Volver a Resumen Diario",BACK:"Atrás"}),a.preferredLanguage("es")}]);var moment=moment||{},DEBUG=!1,host=DEBUG?"http://localhost":"http://elbulliweb.cloudapp.net";angular.module("app.services",[]).factory("Server",["$http","$rootScope",function(a,b){var c={};return c.getMonthlyAsset=function(b,c,d,e){var f=c?host+":8080/timelapse/month/":host+":8080/scanner/month/",g=moment(b,"MMMM, YYYY").format("YYYY-MM");a.get(f+g).success(function(a){d&&d(a)}).error(function(a){e&&e(a)})},c.getAssetsFromDate=function(b,c,d,e){var f=c?host+":8080/timelapse/date/":host+":8080/scanner/date/";a.get(f+b).success(function(a){d&&d(a)}).error(function(a){e&&e(a)})},c.getMonthlyThumb=function(c,d,e){if(moment().unix()-moment(c,"MMDDYYYY").unix()>=0){var f=d?"imageVideo":"imageScan",g=d?host+":8080/timelapse/thumbnail/":host+":8080/scanner/thumbnail/";a.get(g+moment(c,"MMDDYYYY").format("YYYY-MM")).success(function(a){a.data===!1?b.months[e][f]="images/grey_bg.png":b.months[e][f]=a.data}).error(function(a){return"images/grey_bg.png"})}},c}]),angular.module("app.filters",[]).filter("toString",function(){return function(a){return a.toString()}}).filter("limitFromTo",function(){return function(a,b,c){if(!(a instanceof Array||a instanceof String))return a;if(c=parseInt(c,10),a instanceof String)return c?c>=0?a.slice(b,c):a.slice(c,a.length):"";var d,e,f=[];for(c>a.length?c=a.length:c<-a.length&&(c=-a.length),c>0?(d=b,e=c):(d=a.length+c,e=a.length);e>d;d++)f.push(a[d]);return f}}).filter("capitalize",function(){return function(a,b){return a?a.replace(/([^\W_]+[^\s-]*) */g,function(a){return a.charAt(0).toUpperCase()+a.substr(1).toLowerCase()}):""}}),angular.module("elbulliApp").controller("MainCtrl",["$rootScope","$scope","$timeout","$uiViewScroll",function(a,b,c,d){a.title="elBulliLab Timelapse",b.scrollToTechnical=function(){$("html, body").animate({scrollTop:$("#technical-detail").offset().top})},b.scrollToWelcome=function(){$("html, body").animate({scrollTop:$("#welcome").offset().top})}}]);var moment=moment||{};angular.module("elbulliApp").controller("VideoYearCtrl",["$scope","$rootScope","$timeout","$stateParams","$state",function(a,b,c,d,e){b.title="elBulliLab Video Gallery",a.getBackgroundStyle=function(a){return a?{"background-image":"url("+a+")"}:{"background-image":"url(images/grey_bg.png)"}}}]).controller("VideoMonthCtrl",["$scope","$rootScope","$stateParams","Server","$timeout","$state",function(a,b,c,d,e,f){a.thisMonth=moment(c.year+"-"+c.month+"-01").format("MMMM, YYYY"),b.title="elBulliLab Vide Gallery "+a.thisMonth,a.isInProgress=c.month===moment().format("MM")?!0:!1,d.getMonthlyAsset(a.thisMonth,!0,function(b){0==b.data.length?f.go("video"):(a.videos=b.data.sort(function(a,b){return a.date.substr(a.date.length-2,a.date.length)-b.date.substr(b.date.length-2,b.date.length)}),e(function(){a.equalWidth=angular.element(".thumbnail-container").width()},0))},function(a){f.go("video",{lang:b.lang})})}]).controller("VideoDayCtrl",["$scope","$rootScope","$stateParams","Server","$timeout","$location","$state","ngDialog",function(a,b,c,d,e,f,g,h){a.queryDate=c.year+"-"+c.month+"-"+c.day,b.title="elBulliLab Video Gallery "+a.queryDate,a.shareUrl=encodeURIComponent(f.absUrl());var i=encodeURI("http://www.facebook.com/dialog/feed?app_id=1619939151578943&display=popup&description="+b.title+"&redirect_uri=http://facebook.com&link=");a.fullFacebookShareUrl=i+a.shareUrl,a.getVimeoHeight=function(){var a=window.innerHeight-300;$("#vimeo_final").attr({height:function(){return a>650?650:a},width:function(){return 16*a/9>$("#video_resize").width()?"100%":16*a/9}}),$(".vimeo_cam").attr({height:9*$("#vimeo_cam").width()/16})},a.getVimeoHeightMobile=function(){$("#vimeo_final").attr({width:"100%",height:9*$("#vimeo_final").width()/16}),$(".vimeo_cam").attr({height:9*$("#vimeo_cam").width()/16})},a.adjustVimeo=function(){window.innerWidth>=700?a.getVimeoHeight():a.getVimeoHeightMobile()},$(window).on("resize",function(){a.adjustVimeo()}),a.popupVideo=function(b){e(function(){h.open({plain:!0,template:'<p>&nbsp;</p><iframe class="vimeo_cam_popup" src="'+b+'" width="100%" height="355" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>',scope:a})},100)},d.getAssetsFromDate(a.queryDate,!0,function(b){a.video_content=b.data,a.description=b.description,e(function(){a.adjustVimeo();var b="https://player.vimeo.com/video/";a.currentMonth=moment(a.video_content.date).format("MM"),a.currentYear=moment(a.video_content.date).format("YYYY"),a.vimeo_final_url=b+a.video_content.vimeo_final.vimeo_video_id,a.vimeo_cam0_url=b+a.video_content.cam0.vimeo_video_id,a.vimeo_cam1_url=b+a.video_content.cam1.vimeo_video_id,a.vimeo_cam2_url=b+a.video_content.cam2.vimeo_video_id,a.vimeo_cam3_url=b+a.video_content.cam3.vimeo_video_id})},function(a){g.go("video")})}]);var moment=moment||{};angular.module("elbulliApp").controller("PhotoYearCtrl",["$scope","$rootScope","$timeout","$stateParams","$state",function(a,b,c,d,e){b.title="elBulliLab Scan Gallery",a.getBackgroundStyle=function(a){return a?{"background-image":"url("+a+")"}:{"background-image":"url(images/grey_bg.png)"}}}]).controller("PhotoMonthCtrl",["$scope","$rootScope","$stateParams","Server","$timeout","$state",function(a,b,c,d,e,f){a.thisMonth=moment(c.year+"-"+c.month+"-01").format("MMMM, YYYY"),b.title="elBulliLab Scan Gallery "+a.thisMonth,a.isInProgress=c.month===moment().format("MM")?!0:!1,d.getMonthlyAsset(a.thisMonth,!1,function(b){0==b.data.length?f.go("photo"):(a.photos=b.data.sort(function(a,b){return a.date.substr(a.date.length-2,a.date.length)-b.date.substr(b.date.length-2,b.date.length)}),e(function(){a.equalWidth=angular.element(".thumbnail-container").width()},0))},function(a){f.go("photo",{lang:b.lang})})}]).controller("PhotoDayCtrl",["$scope","$rootScope","$stateParams","Server","$timeout","$location",function(a,b,c,d,e,f){a.queryDate=c.year+"-"+c.month+"-"+c.day,b.title="elBulliLab Scan Gallery "+a.queryDate,a.shareUrl=encodeURIComponent(f.absUrl());var g=encodeURI("http://www.facebook.com/dialog/feed?app_id=1619939151578943&display=popup&description="+b.title+"&redirect_uri=http://facebook.com&link=");a.fullFacebookShareUrl=g+a.shareUrl,d.getAssetsFromDate(a.queryDate,!1,function(b){0==b.data.length?$state.go("photo"):(a.photo=b.data,a.currentMonth=moment(a.photo.date).format("MM"),a.currentYear=moment(a.photo.date).format("YYYY"),setTimeout(function(){h()},2e3))},function(a){});var h=function(){var a=window.innerHeight-300;return $(".single-item div").css("height",a)};$(window).on("resize",function(){h()})}]),angular.module("elbulliApp").controller("AboutCtrl",["$scope",function(a){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]);